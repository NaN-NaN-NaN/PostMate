# PostMate Backend - Environment Variables Template
# Copy this file to .env and fill in your values

# =============================================================================
# CORE APPLICATION
# =============================================================================
ENVIRONMENT=local  # local, development, staging, production
DEBUG=true
API_V1_PREFIX=/api/v1
CORS_ORIGINS=["http://localhost:3000","http://localhost:8080"]

# =============================================================================
# AWS CONFIGURATION
# =============================================================================
AWS_REGION=us-east-1
AWS_ACCOUNT_ID=  # Your AWS account ID (for production)

# AWS Credentials (use IAM roles in production, only for local testing)
# AWS_ACCESS_KEY_ID=  # Leave empty to use default AWS CLI credentials
# AWS_SECRET_ACCESS_KEY=  # Leave empty to use default AWS CLI credentials

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# Local Storage (for development without AWS)
USE_LOCAL_STORAGE=true
LOCAL_STORAGE_PATH=./local_data

# S3 Configuration (for production)
S3_BUCKET_NAME=postmate-storage-dev
S3_PREFIX_IMAGES=images/
S3_PREFIX_PDFS=pdfs/
S3_PREFIX_TEXTRACT=textract/
S3_PRESIGNED_URL_EXPIRY=3600  # seconds

# =============================================================================
# OCR CONFIGURATION
# =============================================================================

# OCR Provider: "tesseract" (local) or "textract" (AWS)
OCR_PROVIDER=tesseract

# Tesseract Configuration (local development)
TESSERACT_PATH=/usr/local/bin/tesseract
TESSERACT_LANG=eng
TESSERACT_CONFIG=--oem 3 --psm 6

# Textract Configuration (AWS production)
TEXTRACT_ASYNC=true  # Use async jobs for large documents
TEXTRACT_SNS_TOPIC_ARN=  # For async job notifications
TEXTRACT_ROLE_ARN=  # IAM role for Textract to publish to SNS

# =============================================================================
# LLM CONFIGURATION
# =============================================================================

# LLM Provider: "openai" (local/dev) or "bedrock" (AWS)
LLM_PROVIDER=openai

# OpenAI Configuration (local development)
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.2

# Bedrock Configuration (AWS production)
BEDROCK_MODEL_ID=anthropic.claude-3-sonnet-20240229-v1:0
BEDROCK_REGION=us-east-1
BEDROCK_MAX_TOKENS=4000
BEDROCK_TEMPERATURE=0.2

# LLM Processing
MAX_CHUNK_TOKENS=4000  # For splitting long documents
SUMMARY_MAX_TOKENS=1000  # Max tokens for summaries

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# DynamoDB Local (for development)
USE_DYNAMODB_LOCAL=true
DYNAMODB_LOCAL_ENDPOINT=http://localhost:8000

# DynamoDB Table Names
DYNAMODB_TABLE_DOCUMENTS=postmate-documents-local
DYNAMODB_TABLE_ANALYSES=postmate-analyses-local
DYNAMODB_TABLE_CHATS=postmate-chats-local
DYNAMODB_TABLE_REMINDERS=postmate-reminders-local

# DynamoDB Configuration
DYNAMODB_READ_CAPACITY=5
DYNAMODB_WRITE_CAPACITY=5
DYNAMODB_BILLING_MODE=PAY_PER_REQUEST  # or PROVISIONED

# =============================================================================
# BACKGROUND WORKERS
# =============================================================================

# Worker Mode: "fastapi" (BackgroundTasks) or "lambda" (AWS Lambda + SQS)
WORKER_MODE=fastapi

# SQS Configuration (for Lambda workers)
SQS_QUEUE_URL=  # https://sqs.us-east-1.amazonaws.com/...
SQS_QUEUE_NAME=postmate-ocr-queue

# Lambda Configuration
LAMBDA_OCR_WORKER_ARN=  # ARN of OCR worker Lambda
LAMBDA_REMINDER_WORKER_ARN=  # ARN of reminder scheduler Lambda

# =============================================================================
# REMINDERS & SCHEDULING
# =============================================================================

# Scheduler: "apscheduler" (local) or "eventbridge" (AWS)
SCHEDULER_PROVIDER=apscheduler

# EventBridge Configuration (AWS production)
EVENTBRIDGE_RULE_NAME=postmate-reminder-check
EVENTBRIDGE_SCHEDULE_RATE=rate(5 minutes)  # Check reminders every 5 min

# Email/Notification Configuration (for reminder notifications)
EMAIL_PROVIDER=ses  # ses, sendgrid, or smtp
EMAIL_FROM_ADDRESS=noreply@postmate.example.com
SENDGRID_API_KEY=  # If using SendGrid
SMTP_HOST=  # If using SMTP
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=

# =============================================================================
# PDF GENERATION
# =============================================================================
PDF_FONT_NAME=Helvetica
PDF_FONT_SIZE=10
PDF_PAGE_SIZE=LETTER  # LETTER or A4
PDF_MARGIN=72  # points (1 inch = 72 points)

# =============================================================================
# SEARCH CONFIGURATION
# =============================================================================
SEARCH_MAX_RESULTS=100
SEARCH_ENABLE_FUZZY=true

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================
# Note: Basic demo does not include authentication
# Add these if implementing JWT auth

# SECRET_KEY=your-secret-key-min-32-chars-long
# ALGORITHM=HS256
# ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# LOGGING & MONITORING
# =============================================================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text
LOG_FILE_PATH=./logs/app.log

# CloudWatch Logs (AWS production)
CLOUDWATCH_LOG_GROUP=/aws/ecs/postmate
CLOUDWATCH_LOG_STREAM=postmate-app

# =============================================================================
# PERFORMANCE & LIMITS
# =============================================================================
MAX_UPLOAD_SIZE_MB=10
MAX_FILES_PER_UPLOAD=10
MAX_IMAGE_DIMENSION=4096
SUPPORTED_IMAGE_FORMATS=jpg,jpeg,png,tiff,bmp

# Rate Limiting
RATE_LIMIT_ENABLED=false
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60  # seconds

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_CHAT=true
ENABLE_REMINDERS=true
ENABLE_PDF_EXPORT=true
ENABLE_SEARCH=true
